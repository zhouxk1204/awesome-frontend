# é«˜æ•ˆååºåˆ—åŒ–

## ğŸ“ æ¦‚è¦
åœ¨ Web å¼€å‘ä¸­ï¼ŒJavaScript å¯¹è±¡å¸¸é€šè¿‡åºåˆ—åŒ–ï¼ˆJSON.stringifyï¼‰å­˜å‚¨æˆ–ä¼ è¾“ï¼Œå†é€šè¿‡ååºåˆ—åŒ–ï¼ˆJSON.parseï¼‰æ¢å¤å¯¹è±¡ã€‚  
è™½ç„¶ JSON.parse å¸¸ç”¨ï¼Œä½†å®ƒåœ¨å¤§å‹æ•°æ®æˆ–ç‰¹æ®Šç±»å‹å¤„ç†ä¸Šå­˜åœ¨æ€§èƒ½å’ŒåŠŸèƒ½é™åˆ¶ã€‚æœ¬å¡ç‰‡æ€»ç»“é«˜æ•ˆååºåˆ—åŒ–çš„ç­–ç•¥ã€‚

## ğŸ“Œ æ ¸å¿ƒçŸ¥è¯†ç‚¹

### JSON.parse çš„å±€é™æ€§
- æ€§èƒ½é—®é¢˜ï¼šå¤§å‹ JSON è§£æå¯èƒ½é˜»å¡ä¸»çº¿ç¨‹  
- æ•°æ®ç±»å‹é™åˆ¶ï¼šæ— æ³•ç›´æ¥å¤„ç† Dateã€å‡½æ•°ã€undefinedã€NaNã€RegExp ç­‰  
- å®‰å…¨é£é™©ï¼šè§£æä¸å¯ä¿¡ JSON æœ‰å®‰å…¨éšæ‚£

### æå‡ååºåˆ—åŒ–æ•ˆç‡çš„ç­–ç•¥

#### 1ï¸âƒ£ ä½¿ç”¨ reviver å¤„ç†ç‰¹æ®Šç±»å‹
```js
const jsonWithDate = '{"name":"å¼ ä¸‰","birthDate":"2000-01-01T00:00:00.000Z"}';
const objWithDate = JSON.parse(jsonWithDate, (key, value) => {
  if (key === 'birthDate') return new Date(value);
  return value;
});
console.log(objWithDate.birthDate instanceof Date); // true
```

#### 2ï¸âƒ£ æµå¼è§£æå¤§å‹ JSON
- ä½¿ç”¨åº“å¦‚ `oboe.js` æˆ– `stream-json`  
- é¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§æ•°æ®é€ æˆé˜»å¡

#### 3ï¸âƒ£ ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼
- [MessagePack](https://github.com/msgpack/msgpack-javascript)ã€Protocol Buffersã€BSON  
- ä¼˜ç‚¹ï¼šæ›´ç´§å‡‘ã€æ›´å¿«è§£æ  
- ç¼ºç‚¹ï¼šå¯è¯»æ€§å·®ï¼Œé€‚åˆå†…éƒ¨é€šä¿¡è€Œé API

#### 4ï¸âƒ£ Web Workers å¸è½½è§£æ
- é¿å…é˜»å¡ä¸»çº¿ç¨‹  
- å°†å¤§å‹ JSON è§£æäº¤ç»™ Worker æ‰§è¡Œ

#### 5ï¸âƒ£ å¢é‡è§£æä¸æ‡’åŠ è½½
- å¯¹äºç‰¹åˆ«å¤§çš„æ•°æ®é›†ï¼Œå¯æŒ‰éœ€è§£æå’ŒåŠ è½½æ•°æ®å—

### æ€§èƒ½å¯¹æ¯”
```js
function benchmarkParse() {
  const data = { /* æµ‹è¯•æ•°æ® */ };
  const jsonString = JSON.stringify(data);

  console.time('JSON.parse');
  for (let i = 0; i < 1000; i++) JSON.parse(jsonString);
  console.timeEnd('JSON.parse');

  const msgpackData = msgpack.encode(data);
  console.time('msgpack');
  for (let i = 0; i < 1000; i++) msgpack.decode(msgpackData);
  console.timeEnd('msgpack');
}
```
- å°æ•°æ®é›† (<10KB)ï¼šJSON.parse è¶³å¤Ÿ  
- ä¸­ç­‰æ•°æ®é›† (10KB-1MB)ï¼šäºŒè¿›åˆ¶æ ¼å¼å¦‚ MessagePack æ›´å¿«  
- å¤§æ•°æ®é›† (>1MB)ï¼šæµå¼è§£ææˆ– Web Worker æ›´ä¼˜  

## âœ… æ€»ç»“
- å°æ•°æ®ï¼šæ ‡å‡† JSON.parse  
- å¤§æ•°æ®ï¼šæµå¼è§£æ / Web Worker / äºŒè¿›åˆ¶æ ¼å¼  
- ç‰¹æ®Šç±»å‹ï¼šä½¿ç”¨ reviver æˆ–è‡ªå®šä¹‰åºåˆ—åŒ–æ–¹æ¡ˆ  

## ğŸ”— å…³è”ç¬”è®°
<!-- å¯ä¸ JSON.parseã€MessagePackã€æµå¼è§£æç­‰å¡ç‰‡å…³è” -->

## ğŸ·ï¸ æ ‡ç­¾
#javascript #åºåˆ—åŒ– #ååºåˆ—åŒ– #æ€§èƒ½ä¼˜åŒ– #å‰ç«¯API
