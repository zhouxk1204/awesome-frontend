# XSS vs CSRF vs SameSite vs HttpOnly  

## æ”»å‡» / é˜²å¾¡å¯¹ç…§å›¾ï¼ˆæ€»è§ˆï¼‰

## ğŸ“ æ¦‚è¦

XSSã€CSRF æ˜¯ä¸¤ç§**å®Œå…¨ä¸åŒæ–¹å‘**çš„æ”»å‡»ï¼›  
HttpOnlyã€SameSite æ˜¯é’ˆå¯¹ **â€œæµè§ˆå™¨è‡ªåŠ¨è¡Œä¸ºâ€** çš„é˜²å¾¡æ‰‹æ®µã€‚  
å®ƒä»¬**äº’ç›¸é…åˆï¼Œè€Œä¸æ˜¯äº’ç›¸æ›¿ä»£**ã€‚

---

## ğŸ§  ä¸€å¥è¯å…¨å±€è®¤çŸ¥

> **XSS æ˜¯â€œå·æ‰§è¡Œæƒâ€**  
> **CSRF æ˜¯â€œå·è¯·æ±‚æƒâ€**  
> **HttpOnly é˜²å·çœ‹**  
> **SameSite é˜²ä¹±å¸¦**

---

## ğŸ§­ æ”»å‡» & é˜²å¾¡å…¨æ™¯æ—¶åºå›¾ï¼ˆæ–‡å­—ç‰ˆï¼‰

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ”»å‡»è€…   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ï¼ˆ1ï¼‰æ„é€ è¾“å…¥ / é“¾æ¥ / é¡µé¢
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æµè§ˆå™¨               â”‚
â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Cookie å­˜å‚¨åŒº â”‚â—„â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚           â–²               â”‚   â”‚
â”‚           â”‚ è‡ªåŠ¨æºå¸¦       â”‚   â”‚
â”‚           â”‚               â”‚   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚   â”‚ ç›®æ ‡ç«™ç‚¹é¡µé¢   â”‚â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”‚ï¼ˆbank.comï¼‰    â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚           â”‚                   â”‚
â”‚           â–¼                   â”‚
â”‚   JS æ‰§è¡Œç¯å¢ƒï¼ˆæ˜¯å¦è¢«æ±¡æŸ“ï¼Ÿï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
````

---

## ğŸ”¥ æ”»å‡»æ¨¡å‹å¯¹ç…§è¡¨ï¼ˆæ ¸å¿ƒï¼‰

|ç»´åº¦|XSS|CSRF|
|---|---|---|
|æ”»å‡»ç›®æ ‡|JS æ‰§è¡Œç¯å¢ƒ|è¯·æ±‚å‘é€æœºåˆ¶|
|åˆ©ç”¨ç‚¹|æµè§ˆå™¨ä¿¡ä»»è„šæœ¬|æµè§ˆå™¨è‡ªåŠ¨å¸¦ Cookie|
|æ˜¯å¦è·¨ç«™|ä¸ä¸€å®š|**ä¸€å®šè·¨ç«™**|
|æ˜¯å¦éœ€è¦ç”¨æˆ·æ“ä½œ|æœ‰æ—¶|é€šå¸¸ä¸éœ€è¦|
|æ˜¯å¦èƒ½è¯» Cookie|å¯ä»¥ï¼ˆé HttpOnlyï¼‰|âŒ ä¸è¡Œ|
|æ˜¯å¦èƒ½å¸¦ Cookie|âœ…|âœ…|
|å±å®³çº§åˆ«|æé«˜|é«˜|

---

## ğŸ§¨ XSS æ”»å‡»æ¨¡å‹ï¼ˆç®€åŒ–ï¼‰

```text
æ”»å‡»è€…
  â†“ æ³¨å…¥æ¶æ„ JS
ç«™ç‚¹é¡µé¢
  â†“ æµè§ˆå™¨ä¿¡ä»»
JS æ‰§è¡Œ
  â†“
è¯»å– Cookie / å‘è¯·æ±‚ / åŠ«æŒè´¦å·
```

### ğŸ›¡ï¸ å…³é”®é˜²å¾¡

- è¾“å‡ºç¼–ç 

- CSP

- HttpOnly Cookie

---

## ğŸ§¨ CSRF æ”»å‡»æ¨¡å‹ï¼ˆå…³é”®ç†è§£ï¼‰

```text
æ”»å‡»è€…é¡µé¢ (evil.com)
  â†“ è‡ªåŠ¨æäº¤è¯·æ±‚
æµè§ˆå™¨
  â†“ è‡ªåŠ¨æºå¸¦ Cookie
ç›®æ ‡ç«™ç‚¹ (bank.com)
  â†“
è¯¯ä»¥ä¸ºæ˜¯ç”¨æˆ·æ“ä½œ
```

âš ï¸ **é‡ç‚¹**

> æ˜¯å¦æºå¸¦ Cookieï¼Œåªçœ‹ã€Œè¯·æ±‚ç›®æ ‡åŸŸã€ï¼Œ**ä¸æ˜¯å¦è·¨ç«™æ— å…³**

---

## ğŸª HttpOnly çš„å®šä½

### å®ƒé˜²ä»€ä¹ˆï¼Ÿ

```text
JS âŒ document.cookie
```

â¡ï¸ é˜²æ­¢ **XSS ç›´æ¥å·ä¼šè¯**

### å®ƒé˜²ä¸äº†ä»€ä¹ˆï¼Ÿ

- CSRF

- XSS å‘è¯·æ±‚

ğŸ“Œ **å®šä½**

> HttpOnly æ˜¯ **â€œé™ä½ XSS åæœâ€**ï¼Œä¸æ˜¯æ¶ˆç­ XSS

---

## ğŸª SameSite çš„å®šä½

### SameSite=Strict

```text
è·¨ç«™è¯·æ±‚ âŒ ä¸å¸¦ Cookie
```

### SameSite=Lax

```text
è·¨ç«™ GETï¼ˆå¯¼èˆªï¼‰âœ…
è·¨ç«™ POST âŒ
```

### SameSite=None

```text
å…¨éƒ¨è·¨ç«™è¯·æ±‚ âœ…ï¼ˆå¿…é¡» Secureï¼‰
```

ğŸ“Œ **å®šä½**

> SameSite æ˜¯ **â€œé™åˆ¶ Cookie è‡ªåŠ¨å¤–å€Ÿâ€**

---

## ğŸ§© SameSite vs CSRF çš„å…³ç³»

|SameSite|CSRF é£é™©|
|---|---|
|Strict|å‡ ä¹ 0|
|Lax|ä¸­ï¼ˆå¯è¢« GET åˆ©ç”¨ï¼‰|
|None|é«˜ï¼ˆå¿…é¡»é…åˆ CSRF Tokenï¼‰|

---

## ğŸ” HttpOnly + SameSite è”åˆæ•ˆæœ

|æ”»å‡»ç±»å‹|æ˜¯å¦é˜²ä½|
|---|---|
|XSS å· Cookie|âœ…ï¼ˆHttpOnlyï¼‰|
|XSS å‘è¯·æ±‚|âŒ|
|CSRF è¡¨å•|âœ…ï¼ˆSameSite=Lax/Strictï¼‰|
|CSRF å›¾ç‰‡|âœ…|
|CSRF fetch|å–å†³äº SameSite|

---

## ğŸ§  å››è€…å…³ç³»æ€»ç»“ï¼ˆéå¸¸é‡è¦ï¼‰

```text
XSS      â†’ æ‰§è¡Œæƒé—®é¢˜
CSRF     â†’ è¯·æ±‚æƒé—®é¢˜
HttpOnly â†’ çœ‹ä¸çœ‹å¾—åˆ° Cookie
SameSite â†’ å¸¦ä¸å¸¦ Cookie
```

> **æ²¡æœ‰ä»»ä½•ä¸€ä¸ªæœºåˆ¶æ˜¯â€œä¸‡èƒ½çš„â€**  
> **å®ƒä»¬æ˜¯åˆ†å·¥åä½œçš„**

---

## ğŸ¯ æ¨èå®‰å…¨ç»„åˆï¼ˆç°ä»£ Webï¼‰

```text
Cookie:
  HttpOnly
  Secure
  SameSite=Lax

æ¥å£:
  CSRF Tokenï¼ˆHeaderï¼‰

å‰ç«¯:
  ä¸ç”¨ innerHTML
  å¼€ CSP
```

---

## ğŸ”— å…³è”ç¬”è®°

- [[XSS æ”»å‡»æ¨¡å‹]]

- [[CSRF åŸç†]]

- [[HttpOnly Cookie]]

- [[SameSite Cookie è¯¦è§£]]

---

## ğŸ·ï¸ æ ‡ç­¾

- #security #xss #csrf #cookie #browser #web-security
